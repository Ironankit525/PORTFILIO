<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notion Style Scroll</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Hide scrollbar for Chrome, Safari and Opera */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        /* Hide scrollbar for IE, Edge and Firefox */
        .no-scrollbar {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
        
        html {
            scroll-behavior: smooth;
        }

        /* Transition classes for the indicators */
        .indicator {
            transition: all 300ms ease-out;
            height: 3px;
            /* Removed mix-blend-mode to ensure visibility. 
               Fixed elements sometimes isolate blend modes causing white-on-white invisibility.
            */
        }

        /* Active State */
        .indicator.active {
            background-color: black; /* Restored to Black for visibility */
            width: 14px; 
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.1); 
        }

        /* Inactive State */
        .indicator.inactive {
            background-color: #d1d5db; /* gray-300 */
            width: 6px; 
        }

        /* Hover effect for inactive */
        .indicator-wrapper:hover .indicator.inactive {
            width: 12px; 
            background-color: #9ca3af; /* gray-400 */
        }
    </style>
</head>
<body class="bg-white text-gray-900 font-sans overflow-hidden">

    <div class="flex flex-col h-screen overflow-hidden relative">
        
        <!-- Scrollable Content Area -->
        <main id="scroll-container" class="flex-1 h-full overflow-y-auto no-scrollbar">
            <!-- Sections will be injected here by JS -->
        </main>

        <!-- Custom Notion-like Scroll Indicator (Right Sidebar) -->
        <aside class="hidden md:flex flex-col justify-center fixed right-8 top-0 bottom-0 z-20 w-12">
            <div id="indicator-container" class="flex flex-col items-end space-y-3">
                <!-- Indicators will be injected here by JS -->
            </div>
        </aside>
        
    </div>

    <script>
        // Configuration
        const sectionCount = 6;
        const sectionIds = Array.from({ length: sectionCount }, (_, i) => `section-${i + 1}`);
        
        const scrollContainer = document.getElementById('scroll-container');
        const indicatorContainer = document.getElementById('indicator-container');
        
        // State
        let activeSectionId = sectionIds[0];

        // 1. Generate DOM Elements
        sectionIds.forEach(id => {
            // Create Section
            const section = document.createElement('section');
            section.id = id;
            section.className = 'min-h-screen w-full bg-transparent';
            scrollContainer.appendChild(section);

            // Create Indicator Wrapper
            const wrapper = document.createElement('div');
            wrapper.className = 'indicator-wrapper group flex items-center justify-end cursor-pointer p-2';
            wrapper.onclick = () => scrollToSection(id);

            // Create Indicator Bar
            // Note: The click logic is handled by the wrapper
            const bar = document.createElement('div');
            bar.id = `indicator-${id}`;
            bar.className = 'indicator rounded-full inactive'; // Start inactive
            
            wrapper.appendChild(bar);
            indicatorContainer.appendChild(wrapper);
        });

        // 2. Scroll Logic
        function scrollToSection(id) {
            const element = document.getElementById(id);
            if (element) {
                element.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        function updateIndicators() {
            sectionIds.forEach(id => {
                const bar = document.getElementById(`indicator-${id}`);
                // Simple remove/add logic to toggle classes
                if (id === activeSectionId) {
                    bar.classList.remove('inactive');
                    bar.classList.add('active');
                } else {
                    bar.classList.remove('active');
                    bar.classList.add('inactive');
                }
            });
        }

        // 3. Intersection Observer Setup
        const observerOptions = {
            root: scrollContainer, 
            rootMargin: '-20% 0px -60% 0px', 
            threshold: 0
        };

        const observerCallback = (entries) => {
            entries.forEach((entry) => {
                if (entry.isIntersecting) {
                    activeSectionId = entry.target.id;
                    updateIndicators();
                }
            });
        };

        const observer = new IntersectionObserver(observerCallback, observerOptions);

        // Observe all sections
        sectionIds.forEach(id => {
            const el = document.getElementById(id);
            if (el) observer.observe(el);
        });

        // Initial render
        updateIndicators();

    </script>
</body>
</html>